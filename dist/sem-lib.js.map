{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ba3f0f54ef095366b69e","webpack:///./lib/SortedSet/RedBlackTreeNode.js","webpack:///./lib/isNumeric.js","webpack:///./lib/toInteger.js","webpack:///./lib/Inwaiting.js","webpack:///./lib/sem-lib.js","webpack:///./lib/Semaphore.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/SortedSet/AbstractSortedSet.js","webpack:///./lib/SortedSet/RedBlackTreeStrategy.js","webpack:///./lib/SortedSet/AbstractBinaryTreeStrategy.js","webpack:///./lib/SortedSet/BinaryTreeIterator.js","webpack:///./lib/SortedSet/BinaryTreeNode.js","webpack:///./lib/iterator.js"],"names":["BinaryTreeNode","require","module","exports","value","parent","isRed","isNumeric","obj","undefined","Array","isArray","parsed","parseFloat","toInteger","num","positive","_default","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","parseInt","RedBlackTreeNode","hasProp","Object","hasOwnProperty","globalCounter","Inwaiting","semID","task","priority","options","id","taken","semaphore","forEach","prop","call","nextNum","onCancel","_removeItem","_setImmediate","semGive","nextPriority","group","stack","remove","length","_queue","_insertItem","keys","destroyed","Semaphore","assign","semCreate","args","AbstractSortedSet","RedBlackTreeStrategy","createIterator","isObject","idComparator","a","b","priorityComparator","onlyOnce","fn","Error","callFn","apply","arguments","SortedSet","comparator","priv","node","root","cmp","left","right","capacity","isFull","sync","strategy","_capacity","_numTokens","prototype","getNumTokens","getCapacity","setCapacity","overflow","_semTake","semFlush","item","handleTimeout","onTimeOut","semTake","result","hasOptions","timeOut","onTake","Function","addCounter","bind","cancel","setPriority","timer","setTimeout","_shouldTakeToken","shouldTakeToken","_hasMissingToken","hasMissingToken","_nextGroupItem","groupIterator","itemIterator","beginIterator","Math","min","next","topSync","_taking","keepAlive","_keepAlive","_checkKeepAlive","_destroyWaiting","weakerIterator","weakeGroup","weakerItemIterator","weakerItem","unfair","endIterator","previous","_runTask","hasNext","timerID","_clearImmediate","destroy","safe","onDestroy","_destroying","__onDestroy","_destroy","i","_len","j","_jlen","schedule","collection","iteratee","callback","iterator","cancellers","errors","items","waiting","canceled","done","nextItem","push","replenish","scheduled","give","err","key","icancel","abort","code","_item","Proxy","get","target","receiver","Reflect","_insertGroup","insert","_hasInWaitingTask","clearTimeout","isAlive","Boolean","hasInWaitingTask","_countInWaitingTokens","count","_this","allowNode","global","setImmediate","clearImmediate","g","eval","e","window","contains","toArray","thisArg","forEachImpl","ret","index","self","findIterator","AbstractBinaryTreeStrategy","rotateLeft","tmp","rotateRight","colorFlip","moveRedLeft","moveRedRight","insertInNode","compare","findMinNode","fixUp","removeMinNode","removeFromNode","BinaryTreeIterator","binaryTreeTraverse","some","pos","allowSetValue","sortedSet","find","descendAllTheWay","leftOrRight","moveCursor","rightOrLeft","tree","nextNode","createArrayIterator","arr","len","createObjectIterator","createIterableIterator","iterable","Symbol"],"mappings":"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ACA,UAAMyE,KAAK,GAAGmI,aAAa,CAACvI,IAAI,CAACI,KAAN,CAA3B;;AAEA,UAAIwG,SAAS,IAAIjL,KAAK,YAAYkB,gBAAlC,EAAoD;AAChDlB,aAAK,CAACwE,IAAN,GAAaH,IAAI,CAACG,IAAlB;;AACA,YAAIxE,KAAK,CAACwE,IAAN,KAAe,IAAnB,EAAyB;AACrBxE,eAAK,CAACwE,IAAN,CAAWvE,MAAX,GAAoBD,KAApB;AACH;;AACDA,aAAK,CAACC,MAAN,GAAeoE,IAAI,CAACpE,MAApB;AACAD,aAAK,CAACE,KAAN,GAAcmE,IAAI,CAACnE,KAAnB;AACAmE,YAAI,GAAGrE,KAAP;AACH;;AAEDqE,UAAI,CAACrE,KAAL,GAAaA,KAAb;AACAqE,UAAI,CAACI,KAAL,GAAaA,KAAb;AACH,KAhBD,MAgBO;AACHJ,UAAI,CAACI,KAAL,GAAaoI,cAAc,CAACxI,IAAI,CAACI,KAAN,EAAazE,KAAb,EAAoByM,OAApB,EAA6BxB,SAA7B,CAA3B;AACH;;AAED,QAAI5G,IAAI,CAACI,KAAL,KAAe,IAAnB,EAAyB;AACrBJ,UAAI,CAACI,KAAL,CAAWxE,MAAX,GAAoBoE,IAApB;AACH;AACJ;;AAED,SAAOsI,KAAK,CAACtI,IAAD,CAAZ;AACH,CAzDD,C,CA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;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","file":"sem-lib.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"semLib\"] = factory();\n\telse\n\t\troot[\"semLib\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba3f0f54ef095366b69e","const BinaryTreeNode = require(\"./BinaryTreeNode\");\n\n// Here are some differences:\n// * This isn't a map structure: it's just a tree. There are no keys: the\n//   comparator applies to the values.\n// * We use the passed comparator.\nmodule.exports = class RedBlackTreeNode extends BinaryTreeNode {\n    constructor(value, parent = null) {\n        super(value, parent);\n        this.isRed = true; // null nodes -- leaves -- are black\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/RedBlackTreeNode.js","const isNumeric = obj => {\n    if (obj === undefined || obj === null || Array.isArray(obj)) {\n        return false;\n    }\n\n    const parsed = parseFloat(obj);\n    if (obj === parsed) {\n        return true;\n    }\n\n    return obj - parsed + 1 >= 0;\n};\n\nmodule.exports = isNumeric;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/isNumeric.js","const isNumeric = require(\"./isNumeric\");\n\n/**\n * Value of parsed interger or default value if not a number or < 0\n * @param  {Any} num value to parse\n * @param  {Interger} _default default value\n * @return {Interger} parsing result\n */\nconst toInteger = (num, positive, _default) => {\n    if (!isNumeric(num)) {\n        return _default;\n    }\n\n    if (num === Number.POSITIVE_INFINITY) {\n        return num;\n    }\n\n    if (num === Number.NEGATIVE_INFINITY) {\n        return positive ? _default : num;\n    }\n\n    num = parseInt(num, 10);\n\n    return positive && num < 0 ? _default : num;\n};\n\nmodule.exports = toInteger;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/toInteger.js","const RedBlackTreeNode = require(\"./SortedSet/RedBlackTreeNode\");\nconst toInteger = require(\"./toInteger\");\n\nconst hasProp = Object.hasOwnProperty;\n\n// Debugging purpose\nlet globalCounter = 0;\n\nclass Inwaiting extends RedBlackTreeNode {\n    constructor(semID, task, priority, num, options) {\n        super();\n        this.value = this;\n        this.id = ++globalCounter;\n        this.taken = 0;\n        this.task = task;\n        this.priority = priority;\n        this.num = num;\n        this.semaphore = semID;\n\n        if (options) {\n            [\n                \"onTimeOut\",\n                \"onCancel\",\n                \"unfair\",\n                \"shouldTakeToken\",\n                \"hasMissingToken\",\n                \"sync\",\n                \"hasNext\"\n            ].forEach(prop => {\n                if (hasProp.call(options, prop)) {\n                    this[prop] = options[prop];\n                }\n            });\n        }\n    }\n\n    addCounter(nextNum) {\n        this.num += toInteger(nextNum, true, 1);\n    }\n\n    cancel() {\n        const {onCancel, taken, semaphore: semID} = this;\n        semID._removeItem(this);\n\n        if (taken !== 0) {\n            // give on next tick to wait for all synchronous canceled to be done\n            semID._setImmediate(() => {\n                semID.semGive(taken, true);\n            });\n        }\n\n        if (typeof onCancel === \"function\") {\n            onCancel();\n        }\n    }\n\n    setPriority(nextPriority) {\n        if (this.group == null) {\n            return;\n        }\n\n        const {semaphore: semID} = this;\n\n        nextPriority = toInteger(nextPriority, false, semID.priority);\n        if (nextPriority === this.priority) {\n            return;\n        }\n\n        this.group.stack.remove(this);\n        if (this.group.stack.length === 0) {\n            // No more inWaiting for this priority group\n            semID._queue.remove(this.group);\n        }\n\n        this.priority = nextPriority;\n        semID._insertItem(this);\n    }\n\n    destroy() {\n        // Remove properties to allow garbage collection\n        Object.keys(this).forEach(prop => {\n            switch(prop) {\n                case \"cancel\":\n                case \"id\":\n                case \"num\":\n                case \"scheduled\":\n                case \"taken\":\n                    break;\n                default:\n                    delete this[prop];\n            }\n        });\n\n        // Prevent usage of these methods on a destroyed object\n        [\"addCounter\", \"setPriority\", \"destroy\"].forEach(prop => {\n            this[prop] = undefined;\n        });\n\n        this.destroyed = true;\n    }\n}\n\nmodule.exports = Inwaiting;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/Inwaiting.js","const Semaphore = require(\"./Semaphore\");\r\nconst Inwaiting = require(\"./Inwaiting\");\r\n\r\nObject.assign(exports, {\r\n    semCreate: (...args) => {\r\n        return new Semaphore(...args);\r\n    },\r\n    Semaphore,\r\n    Inwaiting\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/sem-lib.js","const AbstractSortedSet = require(\"./SortedSet/AbstractSortedSet\");\r\nconst RedBlackTreeStrategy = require(\"./SortedSet/RedBlackTreeStrategy\");\r\nconst createIterator = require(\"./iterator\");\r\nconst isNumeric = require(\"./isNumeric\");\r\nconst toInteger = require(\"./toInteger\");\r\nconst Inwaiting = require(\"./Inwaiting\");\r\n\r\nconst isObject = obj => {\r\n    return typeof obj === \"object\" && obj !== null;\r\n};\r\n\r\nconst idComparator = (a, b) => {\r\n    return a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\r\n};\r\n\r\nconst priorityComparator = (a, b) => {\r\n    return a.priority > b.priority ? 1 : a.priority < b.priority ? -1 : 0;\r\n};\r\n\r\nconst onlyOnce = fn => {\r\n    return function() {\r\n        if (fn === null) {\r\n            throw new Error(\"Callback was already called.\");\r\n        }\r\n\r\n        const callFn = fn;\r\n        fn = null;\r\n        callFn.apply(null, arguments);\r\n    };\r\n};\r\n\r\nconst {hasOwnProperty: hasProp} = Object;\r\n\r\n// Debugging purpose\r\nlet globalCounter = 0;\r\n\r\nclass SortedSet extends AbstractSortedSet {\r\n    get(value) {\r\n        const {comparator} = this.priv;\r\n        let {root: node} = this.priv;\r\n        let cmp;\r\n\r\n        while (node !== null) {\r\n            cmp = comparator(value, node.value);\r\n            if (cmp === 0) {\r\n                break;\r\n            } else if (cmp < 0) {\r\n                node = node.left;\r\n            } else {\r\n                node = node.right;\r\n            }\r\n        }\r\n\r\n        return node === null ? undefined : node.value;\r\n    }\r\n}\r\n\r\n/**\r\n * @param  {Integer} capacity (default = 1) Number of tokens that can be handled by the Semaphore\r\n * @param  {Boolean} isFull   (default = false) if true object is created with tokens\r\n * @param  {Integer} priority (default = 15) default priority\r\n * @param  {Boolean} sync     if true tasks will be run synchronously\r\n */\r\nfunction Semaphore(capacity, isFull, priority, sync = false) {\r\n    const _queue = new SortedSet({\r\n        comparator: priorityComparator,\r\n        strategy: RedBlackTreeStrategy\r\n    });\r\n\r\n    this.id = ++globalCounter;\r\n    this._capacity = toInteger(capacity, true, 1);\r\n    this._queue = _queue;\r\n    this._numTokens = isFull ? this._capacity : 0;\r\n    // eslint-disable-next-line no-magic-numbers\r\n    this.priority = toInteger(priority, false, 15);\r\n    this.sync = sync;\r\n}\r\n\r\n/**\r\n * Return the number of available tokens\r\n * @return {Interger} number of available tokens\r\n */\r\nSemaphore.prototype.getNumTokens = function getNumTokens() {\r\n    return this._numTokens;\r\n};\r\n\r\n/**\r\n * Return the maximum of available tokens\r\n * @return {Integer} maximum of available tokens\r\n */\r\nSemaphore.prototype.getCapacity = function getCapacity() {\r\n    return this._capacity;\r\n};\r\n\r\n/**\r\n * Set the maximum of available tokens\r\n * @return {Integer} maximum of available tokens\r\n */\r\nSemaphore.prototype.setCapacity = function setCapacity(capacity) {\r\n    this._capacity = toInteger(capacity, true, this._capacity);\r\n};\r\n\r\n/**\r\n * Add tokens to the Semaphore\r\n *\r\n * @param {Interger} num Number of tokens to add\r\n * @param {Boolean}  allow capacity overflow\r\n */\r\nSemaphore.prototype.semGive = function semGive(num, overflow) {\r\n    if (this.destroyed) {\r\n        return false;\r\n    }\r\n\r\n    if (num !== Number.POSITIVE_INFINITY) {\r\n        num = toInteger(num, true, 1);\r\n        if (num < 1) {\r\n            num = 1;\r\n        }\r\n        this._numTokens += num;\r\n    } else {\r\n        this._numTokens = num;\r\n    }\r\n\r\n    if (!overflow && this._numTokens > this._capacity) {\r\n        this._numTokens = this._capacity;\r\n    }\r\n\r\n    this._semTake(overflow);\r\n\r\n    if (overflow && this._numTokens > this._capacity) {\r\n        this._numTokens = this._capacity;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Give tokens to every inwaiting tasks\r\n */\r\nSemaphore.prototype.semFlush = function semFlush() {\r\n    if (this.destroyed) {\r\n        return false;\r\n    }\r\n\r\n    this._numTokens = 0;\r\n    this._queue.forEach(group => {\r\n        group.stack.forEach(item => {\r\n            item.num = 0;\r\n        });\r\n    });\r\n    this._semTake();\r\n    return true;\r\n};\r\n\r\nSemaphore.prototype.handleTimeout = function handleTimeout(item) {\r\n    const {onTimeOut, taken} = item;\r\n    this._removeItem(item);\r\n\r\n    if (taken !== 0) {\r\n        // give on next tick to wait for all synchronous canceled to be done\r\n        this._setImmediate(() => {\r\n            this.semGive(taken, true);\r\n        });\r\n    }\r\n\r\n    if (typeof onTimeOut === \"function\") {\r\n        onTimeOut();\r\n    }\r\n};\r\n\r\n/**\r\n * Wait for Semaphore availability before calling onTake callback\r\n * @example\r\n * semTake(Function[, takeInstance]);\r\n * semTake(Settings[, takeInstance]);\r\n *\r\n * @param {Object} options options with the following properties:\r\n * <ul>\r\n * <li>{Function} <b><em>onTake</em></b></li>: called on successful take\r\n * <li>{Integer} <b><em>num</em></b></li>(optional, default = 1): Number of tokens to take before calling onTake callback\r\n * <li>{Integer} <b><em>priority</em></b></li>(optional): task priority, smaller is higher priority\r\n * <li>{Number} <b><em>timeOut</em></b></li>(optional): milliseconds to wait before timeOut. If !(options['timeOut'] > 0), waiting will last forever\r\n * <li>{Function} <b><em>onTimeOut</em></b></li>(optional): called if timeOut occurs\r\n * </ul>\r\n * @return {Object|false} item item.addCounter(n = 1) => wait for n more tokens\r\n */\r\nSemaphore.prototype.semTake = function semTake(options, result) {\r\n    if (this.destroyed) {\r\n        return false;\r\n    }\r\n\r\n    const hasOptions = isObject(options);\r\n    let task, timeOut, num, priority;\r\n\r\n    if (hasOptions) {\r\n        task = options.onTake;\r\n        priority = options.priority;\r\n        num = options.num;\r\n        timeOut = options.timeOut;\r\n    } else if (typeof options === \"function\") {\r\n        task = options;\r\n        options = null;\r\n    }\r\n\r\n    if (typeof task !== \"function\") {\r\n        task = Function.prototype;\r\n    }\r\n\r\n    num = toInteger(num, true, 1);\r\n    priority = toInteger(priority, false, this.priority);\r\n\r\n    const item = new Inwaiting(this, task, priority, num, hasOptions ? options : false);\r\n\r\n    if (typeof result === \"function\") {\r\n        result(item);\r\n    } else if (isObject(result)) {\r\n        result.addCounter = item.addCounter.bind(item);\r\n        result.cancel = item.cancel.bind(item);\r\n        result.setPriority = item.setPriority.bind(item);\r\n    }\r\n\r\n    this._insertItem(item);\r\n\r\n    if (isNumeric(timeOut) && timeOut > 0) {\r\n        item.timer = setTimeout(this.handleTimeout.bind(this, item), timeOut);\r\n    }\r\n\r\n    this._semTake();\r\n    return item;\r\n};\r\n\r\nSemaphore.prototype._shouldTakeToken = function _shouldTakeToken(item, num) {\r\n    // avoid giving item as context when calling shouldTakeToken\r\n    return typeof item.shouldTakeToken !== \"function\" || (0, item.shouldTakeToken)(num, item.num, item.taken, this);\r\n};\r\n\r\nSemaphore.prototype._hasMissingToken = function _hasMissingToken(item) {\r\n    if (typeof item.hasMissingToken === \"function\") {\r\n        // avoid giving item as context when calling hasMissingToken\r\n        (0, item.hasMissingToken)(this);\r\n    }\r\n};\r\n\r\nSemaphore.prototype._nextGroupItem = function _nextGroupItem() {\r\n    let groupIterator, group, itemIterator, item;\r\n\r\n    groupIterator = this._queue.beginIterator();\r\n    group = groupIterator.value();\r\n\r\n    itemIterator = group.stack.beginIterator();\r\n    item = itemIterator.value();\r\n\r\n    while (item && item.num !== 0 && !this._shouldTakeToken(item, Math.min(item.num, this._numTokens))) {\r\n        item = null;\r\n\r\n        itemIterator = itemIterator.next();\r\n\r\n        if (itemIterator === null) {\r\n            groupIterator = groupIterator.next();\r\n\r\n            if (groupIterator === null) {\r\n                group = null;\r\n                break;\r\n            }\r\n\r\n            itemIterator = group.stack.beginIterator();\r\n        }\r\n\r\n        item = itemIterator.value();\r\n    }\r\n\r\n    return [group, item];\r\n};\r\n\r\n/**\r\n * Take tokens if available\r\n *\r\n */\r\nSemaphore.prototype._semTake = function _semTake(topSync) {\r\n    if (this._taking) {\r\n        return;\r\n    }\r\n\r\n    if (typeof this.keepAlive === \"undefined\") {\r\n        this._keepAlive();\r\n    }\r\n\r\n    this._taking = true;\r\n    while (this._checkKeepAlive(this._destroyWaiting)) {\r\n        const [group, item] = this._nextGroupItem();\r\n        if (item == null) {\r\n            break;\r\n        }\r\n\r\n        let weakerIterator, weakeGroup, weakerItemIterator, weakerItem;\r\n\r\n        // if item is still waiting for tokens\r\n        if (item.num > this._numTokens) {\r\n            item.taken += this._numTokens;\r\n            item.num -= this._numTokens;\r\n            this._numTokens = 0;\r\n\r\n            // take token from tasks with weaker priority\r\n            if (item.unfair && this._queue.length !== 1) {\r\n                weakerIterator = this._queue.endIterator().previous();\r\n\r\n                while (weakerIterator && item.num !== 0) {\r\n                    weakeGroup = weakerIterator.value();\r\n                    if (weakeGroup === group || weakeGroup.priority <= this.priority) {\r\n                        // can only be unfair on tasks with lower priority that semaphore default priority\r\n                        break;\r\n                    }\r\n\r\n                    weakerItemIterator = weakeGroup.stack.endIterator().previous();\r\n                    weakerItem = weakerItemIterator ? weakerItemIterator.value() : null;\r\n\r\n                    while (weakerItem && item.num !== 0) {\r\n                        if (weakerItem.taken > 0 && this._shouldTakeToken(item, Math.min(item.num, weakerItem.taken))) {\r\n                            const taken = item.num > weakerItem.taken ? weakerItem.taken : item.num;\r\n                            item.taken += taken;\r\n                            item.num -= taken;\r\n                            weakerItem.num += taken;\r\n                            weakerItem.taken -= taken;\r\n                        }\r\n\r\n                        weakerItemIterator = weakerItemIterator.previous();\r\n                        weakerItem = weakerItemIterator ? weakerItemIterator.value() : null;\r\n                    }\r\n\r\n                    if (item.num === 0) {\r\n                        break;\r\n                    }\r\n\r\n                    weakerIterator = weakerIterator ? weakerIterator.previous() : null;\r\n                }\r\n            }\r\n\r\n            // if item is still waiting for tokens, try again at next give or flush\r\n            if (item.num !== 0) {\r\n                this._hasMissingToken(item);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (item.num !== 0) {\r\n            item.taken += item.num;\r\n            if (this._numTokens !== Number.POSITIVE_INFINITY) {\r\n                this._numTokens -= item.num;\r\n            }\r\n            item.num = 0;\r\n        }\r\n\r\n        this._runTask(item, topSync);\r\n    }\r\n    this._taking = false;\r\n};\r\n\r\nSemaphore.prototype._runTask = function(item, topSync) {\r\n    const sync = typeof topSync !== \"undefined\" ? topSync : typeof item.sync !== \"undefined\" ? item.sync : this.sync;\r\n    const {taken, task, onCancel, hasNext} = item;\r\n\r\n    if (sync) {\r\n        if (!hasNext || typeof hasNext !== \"function\" || !hasNext.call(item)) {\r\n            this._removeItem(item);\r\n        }\r\n        task();\r\n        return;\r\n    }\r\n\r\n    // Non blocking call of callback\r\n    // A way to loop through in waiting tasks without blocking\r\n    // the semaphore process until done\r\n    let timerID = this._setImmediate(() => {\r\n        timerID = null;\r\n        task();\r\n    });\r\n\r\n    item.cancel = () => {\r\n        // Prevent usage of cancel\r\n        item.cancel = undefined;\r\n\r\n        this._clearImmediate(timerID);\r\n        timerID = null;\r\n\r\n        // give on next tick to wait for all synchronous canceled to be done\r\n        this._setImmediate(() => {\r\n            this.semGive(taken, true);\r\n        });\r\n\r\n        if (typeof onCancel === \"function\") {\r\n            onCancel();\r\n        }\r\n    };\r\n\r\n    // call hasNext after cancel is set to allow hasNext\r\n    if (!hasNext || typeof hasNext !== \"function\" || !hasNext.call(item)) {\r\n        this._removeItem(item);\r\n    }\r\n};\r\n\r\n/**\r\n * Destroy all inwaiting tasks\r\n * @param  {Boolean} safe if true, wait for all inwaiting tasks to be performed, else, destroy with no warn\r\n */\r\nSemaphore.prototype.destroy = function(safe, onDestroy) {\r\n    if (this._destroying) {\r\n        return false;\r\n    }\r\n\r\n    this._destroying = true;\r\n    this.__onDestroy = onDestroy;\r\n\r\n    if (safe !== false) {\r\n        this._destroyWaiting = true;\r\n        this._semTake();\r\n        return true;\r\n    }\r\n\r\n    return this._destroy(safe);\r\n};\r\n\r\nSemaphore.prototype._destroy = function(safe) {\r\n    this._destroyWaiting = false;\r\n\r\n    let i, _len, j, _jlen;\r\n\r\n    // for loop to avoid infinite loop with while\r\n    for (i = 0, _len = this._queue.length; i < _len; i++) {\r\n        const group = this._queue.beginIterator().value();\r\n\r\n        for (j = 0, _jlen = group.stack.length; j < _jlen; j++) {\r\n            const item = group.stack.beginIterator().value();\r\n            if (safe !== false) {\r\n                item.cancel();\r\n            }\r\n            this._removeItem(item);\r\n        }\r\n    }\r\n\r\n    if (this._checkKeepAlive()) {\r\n        return false;\r\n    }\r\n\r\n    const __onDestroy = this.__onDestroy;\r\n\r\n    this.destroyed = true;\r\n    if (\"function\" === typeof __onDestroy) {\r\n        __onDestroy();\r\n    }\r\n    return true;\r\n};\r\n\r\nSemaphore.prototype.schedule = function(collection, priority, iteratee, callback) {\r\n    switch (arguments.length) {\r\n        case 2:\r\n            if (typeof priority === \"function\") {\r\n                callback = priority;\r\n                priority = null;\r\n            }\r\n            break;\r\n        case 3:\r\n            callback = iteratee;\r\n            iteratee = null;\r\n\r\n            if (\"function\" === typeof priority) {\r\n                iteratee = priority;\r\n                priority = null;\r\n            }\r\n            break;\r\n        default:\r\n            // Nothing to do\r\n    }\r\n\r\n    if (callback == null) {\r\n        callback = Function.prototype;\r\n    }\r\n\r\n    const iterator = createIterator(collection);\r\n    if (iterator === null) {\r\n        callback();\r\n        return null;\r\n    }\r\n\r\n    callback = onlyOnce(callback);\r\n\r\n    const cancellers = [];\r\n    const errors = [];\r\n    const items = [];\r\n    let item;\r\n    let waiting = 0;\r\n    let canceled = false;\r\n    let done = false;\r\n\r\n    const hasNext = () => {\r\n        if (done) {\r\n            return false;\r\n        }\r\n\r\n        const nextItem = iterator();\r\n\r\n        if (nextItem === null) {\r\n            done = true;\r\n            return false;\r\n        }\r\n\r\n        items.push(nextItem);\r\n        cancellers.push(item.cancel);\r\n        delete item.cancel;\r\n\r\n        waiting++;\r\n        item.num = 1; // tell _semTake that we still need tokens\r\n        item.taken = 0; // reset taken to prevent unfair taken of this item\r\n\r\n        return true;\r\n    };\r\n\r\n    const replenish = () => {\r\n        waiting--;\r\n        this.semGive();\r\n        if (!canceled && waiting === 0 && done) {\r\n            callback(errors.length === 0 ? undefined : errors);\r\n        }\r\n    };\r\n\r\n    const onTake = () => {\r\n        if (items.length === item.scheduled) {\r\n            replenish();\r\n            return;\r\n        }\r\n\r\n        const i = item.scheduled;\r\n        const nextItem = items[i];\r\n        cancellers[i] = null;\r\n        item.scheduled++;\r\n\r\n        const give = err => {\r\n            nextItem.done = true;\r\n\r\n            cancellers[i] = undefined;\r\n\r\n            if (err) {\r\n                errors[i] = err;\r\n            }\r\n\r\n            replenish();\r\n        };\r\n\r\n        const {key, value} = nextItem;\r\n        nextItem.done = false;\r\n        nextItem.iteratee = typeof iteratee === \"function\" ? iteratee : value;\r\n        const icancel = typeof iteratee === \"function\" ? iteratee(value, key, give) : value(give);\r\n\r\n        if (cancellers[i] !== undefined && icancel) {\r\n            cancellers[i] = () => {\r\n                cancellers[i] = null;\r\n\r\n                if (typeof icancel === \"function\") {\r\n                    icancel();\r\n                } else if (typeof icancel === \"object\") {\r\n                    if (typeof icancel.cancel === \"function\") {\r\n                        icancel.cancel();\r\n                    } else if (typeof icancel.abort === \"function\") {\r\n                        icancel.abort();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    };\r\n\r\n    const onCancel = () => {\r\n        canceled = true;\r\n\r\n        this._removeItem(item); // remove item since there is no more token needed and _semTake will not remove it\r\n\r\n        cancellers.forEach(cancel => {\r\n            if (typeof cancel === \"function\") {\r\n                cancel();\r\n            }\r\n        });\r\n\r\n        const err = new Error(\"canceled\");\r\n        err.code = \"CANCELED\";\r\n        callback(err);\r\n    };\r\n\r\n    waiting++;\r\n    item = this.semTake({\r\n        priority,\r\n        onTake,\r\n        hasNext,\r\n    }, _item => {\r\n        item = _item;\r\n        item.scheduled = 0;\r\n    });\r\n\r\n    if (!item.cancel) {\r\n        return item;\r\n    }\r\n\r\n    return new Proxy(item, {\r\n        get(target, prop, receiver) {\r\n            if (prop === \"cancel\") {\r\n                return canceled ? undefined : onCancel;\r\n            }\r\n\r\n            if (prop === \"setPriority\") {\r\n                return target.setPriority.bind(target);\r\n            }\r\n\r\n            if (prop === \"scheduled\") {\r\n                return Reflect.get(...arguments);\r\n            }\r\n\r\n            return undefined;\r\n        }\r\n    });\r\n};\r\n\r\nSemaphore.prototype._insertItem = function(item) {\r\n    let group = this._queue.get({\r\n        priority: item.priority\r\n    });\r\n    if (!group) {\r\n        group = this._insertGroup(item);\r\n    }\r\n    group.stack.insert(item);\r\n    item.group = group;\r\n};\r\n\r\nSemaphore.prototype._checkKeepAlive = function _checkKeepAlive(_destroyWaiting) {\r\n    if (this._hasInWaitingTask()) {\r\n        return true;\r\n    }\r\n\r\n    if (this.keepAlive) {\r\n        clearTimeout(this.keepAlive);\r\n        delete this.keepAlive;\r\n    }\r\n\r\n    if (_destroyWaiting) {\r\n        this._destroy();\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\nSemaphore.prototype.isAlive = function isAlive() {\r\n    return Boolean(this.keepAlive);\r\n};\r\n\r\nSemaphore.prototype.hasInWaitingTask = function hasInWaitingTask() {\r\n    return hasProp.call(this, \"_queue\") && this._hasInWaitingTask();\r\n};\r\n\r\nSemaphore.prototype._countInWaitingTokens = function _countInWaitingTokens() {\r\n    let count = 0;\r\n\r\n    if (!this.hasInWaitingTask()) {\r\n        return count;\r\n    }\r\n\r\n    let iterator = this._queue.beginIterator();\r\n\r\n    let group, itemIterator, item;\r\n    while (iterator) {\r\n        group = iterator.value();\r\n\r\n        if (group != null && group.stack.length !== 0) {\r\n            itemIterator = group.stack.beginIterator();\r\n\r\n            while (itemIterator) {\r\n                item = itemIterator.value();\r\n                if (item != null) {\r\n                    count += item.num;\r\n                }\r\n                itemIterator = itemIterator.next();\r\n            }\r\n        }\r\n\r\n        iterator = iterator.next();\r\n    }\r\n\r\n    return count;\r\n};\r\n\r\nSemaphore.prototype._hasInWaitingTask = function _hasInWaitingTask() {\r\n    return this._queue.length !== 0;\r\n};\r\n\r\nSemaphore.prototype._keepAlive = function _keepAlive() {\r\n    if (!this._hasInWaitingTask()) {\r\n        return;\r\n    }\r\n    const _this = this;\r\n    this.keepAlive = setTimeout(() => {\r\n        _this._keepAlive();\r\n    }, 1000);\r\n};\r\n\r\n/**\r\n * Remove item from a priority group\r\n *\r\n */\r\nSemaphore.prototype._removeItem = function _removeItem(item) {\r\n    if (item.timer) {\r\n        clearTimeout(item.timer);\r\n    }\r\n\r\n    item.group.stack.remove(item);\r\n\r\n    if (item.group.stack.length === 0) {\r\n        // No more inWaiting for this priority group\r\n        this._queue.remove(item.group);\r\n\r\n        this._checkKeepAlive();\r\n    }\r\n\r\n    item.destroy();\r\n};\r\n\r\nSemaphore.prototype._insertGroup = function _insertGroup(item) {\r\n    const stack = new SortedSet({\r\n        comparator: idComparator,\r\n        strategy: RedBlackTreeStrategy,\r\n        allowNode: true\r\n    });\r\n\r\n    const group = {\r\n        priority: item.priority,\r\n        stack\r\n    };\r\n    this._queue.insert(group);\r\n    return group;\r\n};\r\n\r\nSemaphore.prototype._setImmediate = (() => {\r\n    if (typeof global === \"object\" && typeof global.setImmediate === \"function\") {\r\n        return global.setImmediate;\r\n    }\r\n\r\n    return fn => {\r\n        return setTimeout(fn, 1);\r\n    };\r\n})();\r\n\r\nSemaphore.prototype._clearImmediate = (() => {\r\n    if (typeof global === \"object\" && typeof global.clearImmediate === \"function\") {\r\n        return global.clearImmediate;\r\n    }\r\n\r\n    return id => {\r\n        clearTimeout(id);\r\n    };\r\n})();\r\n\r\nmodule.exports = Semaphore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/Semaphore.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = class AbstractSortedSet {\n    constructor(options) {\n        if (options === null || typeof options !== \"object\" || typeof options.strategy !== \"function\") {\n            throw new Error(\"Must pass options.strategy, a strategy\");\n        }\n        if (options === null || typeof options !== \"object\" || typeof options.comparator !== \"function\") {\n            throw new Error(\"Must pass options.comparator, a comparator\");\n        }\n        this.priv = new options.strategy(options);\n        this.length = 0;\n    }\n\n    insert(value) {\n        this.priv.insert(value);\n        this.length += 1;\n        return this;\n    }\n\n    remove(value) {\n        this.priv.remove(value);\n        this.length -= 1;\n        return this;\n    }\n\n    contains(value) {\n        return this.priv.contains(value);\n    }\n\n    // Returns this set as an Array\n    toArray() {\n        return this.priv.toArray();\n    }\n\n    forEach(callback, thisArg) {\n        this.priv.forEachImpl(callback, this, thisArg);\n    }\n\n    map(callback, thisArg) {\n        const ret = [];\n        this.priv.forEachImpl((value, index, self) => {\n            ret.push(callback.call(thisArg, value, index, self));\n        }, this, thisArg);\n        return ret;\n    }\n\n    filter(callback, thisArg) {\n        const ret = [];\n        this.priv.forEachImpl((value, index, self) => {\n            if (callback.call(thisArg, value, index, self)) {\n                ret.push(value);\n            }\n        }, this, thisArg);\n        return ret;\n    }\n\n    every(callback, thisArg) {\n        let ret = true;\n        this.priv.forEachImpl((value, index, self) => {\n            if (!callback.call(thisArg, value, index, self)) {\n                ret = false;\n            }\n            return !ret;\n        }, this, thisArg, true);\n        return ret;\n    }\n\n    some(callback, thisArg) {\n        let ret = false;\n        this.priv.forEachImpl((value, index, self) => {\n            if (callback.call(thisArg, value, index, self)) {\n                ret = true;\n            }\n            return ret;\n        }, this, thisArg);\n        return ret;\n    }\n\n    // An iterator is similar to a C++ iterator: it points _before_ a value.\n\n    // So in this sorted set:\n\n    //   | 1 | 2 | 3 | 4 | 5 |\n    //   ^a      ^b          ^c\n\n    // `a` is a pointer to the beginning of the iterator. `a.value()` returns\n    // `3`. `a.previous()` returns `null`. `a.setValue()` works, if\n    // `options.allowSetValue` is true.\n\n    // `b` is a pointer to the value `3`. `a.previous()` and `a.next()` both do\n    // the obvious.\n\n    // `c` is a pointer to the `null` value. `c.previous()` works; `c.next()`\n    // returns null. `c.setValue()` throws an exception, even if\n    // `options.allowSetValue` is true.\n\n    // Iterators have `hasNext()` and `hasPrevious()` methods, too.\n\n    // Iterators are immutible. `iterator.next()` returns a new iterator.\n\n    // Iterators become invalid as soon as `insert()` or `remove()` is called.\n    findIterator(value) {\n        return this.priv.findIterator(value);\n    }\n\n    // Finds an iterator pointing to the lowest possible value.\n    beginIterator() {\n        return this.priv.beginIterator();\n    }\n\n    // Finds an iterator pointing to the `null` value.\n    endIterator() {\n        return this.priv.endIterator();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/AbstractSortedSet.js","const AbstractBinaryTreeStrategy = require(\"./AbstractBinaryTreeStrategy\");\nconst RedBlackTreeNode = require(\"./RedBlackTreeNode\");\n\n// An implementation of Left-Leaning Red-Black trees.\n\n// It's copied from http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf.\n// It's practically a copy-paste job, minus the semicolons. missing bits were\n// filled in with hints from\n// https://www.teachsolaisgames.com/articles/balanced_left_leaning.html\n\nconst rotateLeft = node => {\n    const tmp = node.right;\n    tmp.parent = null;\n\n    node.right = tmp.left;\n    if (node.right !== null) {\n        node.right.parent = node;\n    }\n\n    tmp.left = node;\n    if (tmp.left !== null) {\n        tmp.left.parent = tmp;\n    }\n    tmp.isRed = node.isRed;\n    node.isRed = true;\n    return tmp;\n};\n\nconst rotateRight = node => {\n    const tmp = node.left;\n    tmp.parent = null;\n\n    node.left = tmp.right;\n    if (node.left !== null) {\n        node.left.parent = node;\n    }\n\n    tmp.right = node;\n    if (tmp.right !== null) {\n        tmp.right.parent = tmp;\n    }\n\n    tmp.isRed = node.isRed;\n    node.isRed = true;\n    return tmp;\n};\n\nconst colorFlip = node => {\n    node.isRed = !node.isRed;\n    node.left.isRed = !node.left.isRed;\n    node.right.isRed = !node.right.isRed;\n};\n\nconst moveRedLeft = node => {\n    //throw 'Preconditions failed' if !(!node.left.isRed && !node.left.left?.isRed)\n    colorFlip(node);\n    if (node.right !== null && node.right.left !== null && node.right.left.isRed) {\n        node.right = rotateRight(node.right);\n        node.right.parent = node;\n        node = rotateLeft(node);\n        colorFlip(node);\n    }\n    return node;\n};\n\nconst moveRedRight = node => {\n    //throw 'Preconditions failed' if !(!node.right.isRed && !node.right.left?.isRed)\n    colorFlip(node);\n    if (node.left !== null && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n        colorFlip(node);\n    }\n    return node;\n};\n\nconst insertInNode = (node, value, compare, allowNode, parent) => {\n    if (node === null) {\n        if (allowNode && value instanceof RedBlackTreeNode) {\n            if (!value.isRed) {\n                value.isRed = true;\n            }\n            return value;\n        }\n        return new RedBlackTreeNode(value);\n    }\n\n    //if node.left isnt null && node.left.isRed && node.right isnt null && node.right.isRed\n    //  colorFlip(node)\n    if (node.value === value) {\n        throw new Error(\"Value already in set\");\n    }\n\n    if (compare(value, node.value) < 0) {\n        node.left = insertInNode(node.left, value, compare, allowNode, node);\n        node.left.parent = node;\n    } else {\n        node.right = insertInNode(node.right, value, compare, allowNode, node);\n        node.right.parent = node;\n    }\n\n    if (node.right !== null && node.right.isRed && !(node.left !== null && node.left.isRed)) {\n        node = rotateLeft(node);\n    }\n\n    if (node.left !== null && node.left.isRed && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n    }\n\n    // Put this here -- I couldn't get the whole thing to work otherwise :(\n    if (node.left !== null && node.left.isRed && node.right !== null && node.right.isRed) {\n        colorFlip(node);\n    }\n\n    return node;\n};\n\nconst findMinNode = node => {\n    while (node.left !== null) {\n        node = node.left;\n    }\n    return node;\n};\n\nconst fixUp = node => {\n    // Fix right-leaning red nodes\n    if (node.right !== null && node.right.isRed) {\n        node = rotateLeft(node);\n    }\n\n    // Handle a 4-node that traverses down the left\n    if (node.left !== null && node.left.isRed && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n    }\n\n    // split 4-nodes\n    if (node.left !== null && node.left.isRed && node.right !== null && node.right.isRed) {\n        colorFlip(node);\n    }\n\n    return node;\n};\n\nconst removeMinNode = node => {\n    if (node.left === null) {\n        return null;\n    }\n    if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n        node = moveRedLeft(node);\n    }\n    node.left = removeMinNode(node.left);\n    if (node.left !== null) {\n        node.left.parent = node;\n    }\n    return fixUp(node);\n};\n\n// // const removeMinNodeStack = new Array(1024);\n// const removeMinNode = node => {\n//     let pos = 0;\n//     const removeMinNodeStack = [];\n//     removeMinNodeStack[pos++] = node;\n//     removeMinNodeStack[pos++] = 0;\n//     // let stackSize = pos;\n//     let ret;\n\n//     while (pos !== 0) {\n//         // if (pos > stackSize) {\n//         //     stackSize = pos;\n//         // }\n//         if (removeMinNodeStack[--pos] === 0) {\n//             node = removeMinNodeStack[--pos];\n\n//             if (node.left === null) {\n//                 ret = null;\n//                 continue;\n//             }\n\n//             if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n//                 node = moveRedLeft(node);\n//             }\n\n//             removeMinNodeStack[pos++] = node;\n//             removeMinNodeStack[pos++] = 1;\n//             removeMinNodeStack[pos++] = node.left;\n//             removeMinNodeStack[pos++] = 0;\n//         } else {\n//             node = removeMinNodeStack[--pos];\n//             node.left = ret;\n//             if (node.left !== null) {\n//                 node.left.parent = node;\n//             }\n//             ret = fixUp(node);\n//         }\n//     }\n\n//     // for (let i = 0; i < stackSize; i++) {\n//     //     removeMinNodeStack[i] = undefined;\n//     // }\n\n//     return ret;\n// };\n\nconst removeFromNode = (node, value, compare, allowNode) => {\n    if (node === null) {\n        throw new Error(\"Value not in set\");\n    }\n\n    if (node.value !== value && compare(value, node.value) < 0) {\n        if (node.left === null) {\n            throw new Error(\"Value not in set\");\n        }\n \n        if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n            node = moveRedLeft(node);\n        }\n \n        node.left = removeFromNode(node.left, value, compare, allowNode);\n        if (node.left !== null) {\n            node.left.parent = node;\n        }\n    } else {\n        if (node.left !== null && node.left.isRed) {\n            node = rotateRight(node);\n        }\n        if (node.right === null) {\n            if (value === node.value) {\n                return null; // leaf node; LLRB assures no left value here\n            }\n            throw new Error(\"Value not in set\");\n        }\n        if (!node.right.isRed && !(node.right.left !== null && node.right.left.isRed)) {\n            node = moveRedRight(node);\n        }\n        if (value === node.value) {\n            value = findMinNode(node.right).value;\n            const right = removeMinNode(node.right);\n\n            if (allowNode && value instanceof RedBlackTreeNode) {\n                value.left = node.left;\n                if (value.left !== null) {\n                    value.left.parent = value;\n                }\n                value.parent = node.parent;\n                value.isRed = node.isRed;\n                node = value;\n            }\n\n            node.value = value;\n            node.right = right;\n        } else {\n            node.right = removeFromNode(node.right, value, compare, allowNode);\n        }\n\n        if (node.right !== null) {\n            node.right.parent = node;\n        }\n    }\n\n    return fixUp(node);\n};\n\n// // const removeFromNodeStask = new Array(1024);\n// const removeFromNode = (node, value, compare, allowNode) => {\n//     let pos = 0;\n//     const removeFromNodeStask = [];\n//     removeFromNodeStask[pos++] = node;\n//     removeFromNodeStask[pos++] = 0;\n//     // let stackSize = pos;\n//     let ret, cmd;\n\n//     while (pos !== 0) {\n//         // if (pos > stackSize) {\n//         //     stackSize = pos;\n//         // }\n//         cmd = removeFromNodeStask[--pos];\n\n//         // eslint-disable-next-line default-case\n//         switch(cmd) {\n//             case 0:\n//                 node = removeFromNodeStask[--pos];\n\n//                 if (node === null) {\n//                     throw new Error(\"Value not in set\");\n//                 }\n\n//                 if (node.value !== value && compare(value, node.value) < 0) {\n//                     if (node.left === null) {\n//                         throw new Error(\"Value not in set\");\n//                     }\n//                     if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n//                         node = moveRedLeft(node);\n//                     }\n//                     removeFromNodeStask[pos++] = node;\n//                     removeFromNodeStask[pos++] = 1;\n//                     removeFromNodeStask[pos++] = node.left;\n//                     removeFromNodeStask[pos++] = 0;\n//                     break;\n//                 }\n\n//                 if (node.left !== null && node.left.isRed) {\n//                     node = rotateRight(node);\n//                 }\n\n//                 if (node.right === null) {\n//                     if (value === node.value) {\n//                         ret = null; // leaf node; LLRB assures no left value here\n//                         break;\n//                     }\n//                     throw new Error(\"Value not in set\");\n//                 }\n\n//                 if (!node.right.isRed && !(node.right.left !== null && node.right.left.isRed)) {\n//                     node = moveRedRight(node);\n//                 }\n\n//                 if (value === node.value) {\n//                     value = findMinNode(node.right).value;\n//                     const right = removeMinNode(node.right);\n\n//                     if (allowNode && value instanceof RedBlackTreeNode) {\n//                         value.left = node.left;\n//                         if (value.left !== null) {\n//                             value.left.parent = value;\n//                         }\n//                         value.parent = node.parent;\n//                         value.isRed = node.isRed;\n//                         node = value;\n//                     }\n\n//                     node.value = value;\n//                     node.right = right;\n\n//                     if (node.right !== null) {\n//                         node.right.parent = node;\n//                     }\n//                     ret = fixUp(node);\n//                     break;\n//                 }\n\n//                 removeFromNodeStask[pos++] = node;\n//                 removeFromNodeStask[pos++] = 2;\n//                 removeFromNodeStask[pos++] = node.right;\n//                 removeFromNodeStask[pos++] = 0;\n//                 break;\n//             case 1:\n//                 node = removeFromNodeStask[--pos];\n//                 node.left = ret;\n//                 if (node.left !== null) {\n//                     node.left.parent = node;\n//                 }\n//                 ret = fixUp(node);\n//                 break;\n//             case 2:\n//                 node = removeFromNodeStask[--pos];\n//                 node.right = ret;\n//                 if (node.right !== null) {\n//                     node.right.parent = node;\n//                 }\n//                 ret = fixUp(node);\n//                 break;\n//         }\n//     }\n\n//     // for (let i = 0; i < stackSize; i++) {\n//     //     removeFromNodeStask[i] = undefined;\n//     // }\n\n//     return ret;\n// };\n\nmodule.exports = class RedBlackTreeStrategy extends AbstractBinaryTreeStrategy {\n    insert(value) {\n        this.root = insertInNode(this.root, value, this.comparator, this.allowNode);\n        this.root.parent = null;\n        this.root.isRed = false;\n    }\n\n    remove(value) {\n        this.root = removeFromNode(this.root, value, this.comparator, this.allowNode);\n        if (this.root !== null) {\n            this.root.parent = null;\n            this.root.isRed = false;\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/RedBlackTreeStrategy.js","const BinaryTreeIterator = require(\"./BinaryTreeIterator\");\n\n// const binaryTreeTraverse = (node, callback, some) => {\n//     if (node === null) {\n//         return false;\n//     }\n\n//     let ret;\n\n//     ret = binaryTreeTraverse(node.left, callback, some);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     ret = callback(node.value);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     ret = binaryTreeTraverse(node.right, callback, some);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     return false;\n// };\n\n// Not subject to stackoverflow\nconst binaryTreeTraverse = (node, callback, some) => {\n    if (node === null) {\n        return;\n    }\n\n    const stack = [1, node.right, 0, node.value, 1, node.left];\n    let pos = stack.length;\n    let ret;\n\n    while (pos !== 0) {\n        pos -= 2;\n        node = stack[pos + 1];\n        if (stack[pos] === 0) {\n            ret = callback(node);\n            if (some && ret) {\n                break;\n            }\n        } else if (node !== null) {\n            stack[pos++] = 1;\n            stack[pos++] = node.right;\n            stack[pos++] = 0;\n            stack[pos++] = node.value;\n            stack[pos++] = -1;\n            stack[pos++] = node.left;\n        }\n    }\n};\n\n// An AbstractBinaryTreeStrategy has a @root. @root is null or an object with\n// `.left`, `.right` and `.value` properties.\nmodule.exports = class AbstractBinaryTreeStrategy {\n    constructor(options) {\n        this.root = null;\n        this.comparator = options.comparator;\n        this.allowSetValue = options.allowSetValue;\n        this.allowNode = options.allowNode;\n    }\n\n    toArray() {\n        const ret = [];\n        binaryTreeTraverse(this.root, value => {\n            ret.push(value);\n        });\n        return ret;\n    }\n\n    forEachImpl(callback, sortedSet, thisArg, some) {\n        if (typeof thisArg === \"undefined\") {\n            thisArg = sortedSet;\n        }\n        let i = 0;\n        binaryTreeTraverse(this.root, value => {\n            return callback.call(thisArg, value, i++, sortedSet);\n        }, some);\n    }\n\n    contains(value) {\n        const {comparator} = this;\n        let {root: node} = this;\n        let cmp;\n\n        while (node !== null) {\n            cmp = comparator(value, node.value);\n            if (cmp === 0) {\n                break;\n            } else if (cmp < 0) {\n                node = node.left;\n            } else {\n                node = node.right;\n            }\n        }\n\n        return node !== null && node.value === value;\n    }\n\n    findIterator(value) {\n        return BinaryTreeIterator.find(this, value, this.comparator);\n    }\n\n    beginIterator() {\n        return BinaryTreeIterator.left(this);\n    }\n\n    endIterator() {\n        return BinaryTreeIterator.right(this);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/AbstractBinaryTreeStrategy.js","const descendAllTheWay = (leftOrRight, node) => {\n    while (node[leftOrRight] !== null) {\n        node = node[leftOrRight];\n    }\n    return node;\n};\n\nconst moveCursor = (leftOrRight, node) => {\n    let parent, rightOrLeft;\n    if (node[leftOrRight] !== null) {\n        parent = node;\n        node = node[leftOrRight];\n        rightOrLeft = leftOrRight === \"left\" ? \"right\" : \"left\";\n        node = descendAllTheWay(rightOrLeft, node);\n    } else {\n        while ((parent = node.parent) !== null && parent[leftOrRight] === node) {\n            node = parent;\n        }\n        node = parent; // either null or the correct-direction parent\n    }\n    return node;\n};\n\n// The BinaryTreeIterator actually writes to the tree: it maintains a\n// \"parent\" variable on each node. Please ignore this.\nclass BinaryTreeIterator {\n    constructor(tree, node) {\n        this.tree = tree;\n        this.node = node;\n    }\n\n    next() {\n        if (this.node === null) {\n            return null;\n        }\n        const node = moveCursor(\"right\", this.node);\n        return node === null ? null : new BinaryTreeIterator(this.tree, node);\n    }\n\n    previous() {\n        if (this.node === null) {\n            if (this.tree.root === null) {\n                return null;\n            }\n\n            const node = descendAllTheWay(\"right\", this.tree.root);\n            return node === null ? null : new BinaryTreeIterator(this.tree, node);\n        }\n\n        const node = moveCursor(\"left\", this.node);\n        return node === null ? null : new BinaryTreeIterator(this.tree, node);\n    }\n\n    hasNext() {\n        return this.next() !== null;\n    }\n\n    hasPrevious() {\n        return this.previous() !== null;\n    }\n\n    value() {\n        return this.node === null ? null : this.node.value;\n    }\n\n    setValue(value) {\n        if (!this.tree.allowSetValue) {\n            throw new Error(\"Must set options.allowSetValue\");\n        }\n        if (this.node === null) {\n            throw new Error(\"Cannot set value at end of set\");\n        }\n        this.node.value = value;\n        return value;\n    }\n}\n\nBinaryTreeIterator.find = (tree, value, comparator) => {\n    let {root: node} = tree;\n    let nextNode = null; // For finding an in-between node\n    let cmp;\n\n    while (node !== null) {\n        cmp = comparator(value, node.value);\n        if (cmp === 0) {\n            break;\n        }\n\n        if (cmp < 0) {\n            if (node.left === null) {\n                break;\n            }\n\n            // If we descend all right after this until there are\n            // no more right nodes, we want to return an\n            // \"in-between\" iterator ... pointing here.\n            nextNode = node;\n            node = node.left;\n        } else if (node.right !== null) {\n            node = node.right;\n        } else {\n            node = nextNode;\n            break;\n        }\n    }\n\n    return new BinaryTreeIterator(tree, node);\n};\n\nBinaryTreeIterator.left = tree => {\n    if (tree.root === null) {\n        return new BinaryTreeIterator(tree, null);\n    }\n\n    const node = descendAllTheWay(\"left\", tree.root);\n    return new BinaryTreeIterator(tree, node);\n};\n\nBinaryTreeIterator.right = tree => {\n    return new BinaryTreeIterator(tree, null);\n};\n\nmodule.exports = BinaryTreeIterator;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/BinaryTreeIterator.js","module.exports = class BinaryTreeNode {\n    constructor(value, parent = null) {\n        this.value = value;\n        this.left = null;\n        this.right = null;\n        this.parent = parent;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/BinaryTreeNode.js","const createArrayIterator = arr => {\n    let i = 0;\n    const len = arr.length;\n\n    return function next() {\n        return i < len ? {\n            key: i,\n            value: arr[i++],\n        } : null;\n    };\n};\n\nconst createObjectIterator = obj => {\n    let i = 0;\n    const keys = Object.keys(obj);\n    const len = keys.length;\n\n    return function next() {\n        return i < len ? {\n            key: keys[i],\n            value: obj[keys[i++]]\n        } : null;\n    };\n};\n\nconst createIterableIterator = iterable => {\n    const iterator = iterable[Symbol.iterator]();\n    return function next() {\n        const item = iterator.next();\n        return item === null || typeof item !== \"object\" ? item : item.done ? null : item;\n    };\n};\n\nconst iterator = obj => {\n    if (obj === null || typeof obj !== \"object\") {\n        return null;\n    }\n\n    return Array.isArray(obj) ? createArrayIterator(obj) : Symbol.iterator in obj ? createIterableIterator(obj) : createObjectIterator(obj);\n};\n\nmodule.exports = iterator;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/iterator.js"],"sourceRoot":""}