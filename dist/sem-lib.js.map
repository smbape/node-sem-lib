{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0eacb73d39704291af90","webpack:///./lib/SortedSet/RedBlackTreeNode.js","webpack:///./lib/sem-lib.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/SortedSet/AbstractSortedSet.js","webpack:///./lib/SortedSet/BinaryTreeNode.js","webpack:///./lib/SortedSet/RedBlackTreeStrategy.js","webpack:///./lib/SortedSet/AbstractBinaryTreeStrategy.js","webpack:///./lib/SortedSet/BinaryTreeIterator.js"],"names":["BinaryTreeNode","require","module","exports","value","parent","isRed","AbstractSortedSet","RedBlackTreeNode","RedBlackTreeStrategy","isNumeric","obj","undefined","Array","isArray","parsed","parseFloat","isObject","toInteger","num","positive","_default","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","parseInt","idComparator","a","b","id","priorityComparator","priority","hasProp","Object","hasOwnProperty","globalCounter","SortedSet","comparator","priv","node","root","cmp","left","right","Inwaiting","semID","task","options","taken","semaphore","forEach","prop","call","nextNum","onCancel","_removeItem","_setImmediate","semGive","nextPriority","group","stack","remove","length","_queue","_insertItem","keys","destroyed","Semaphore","capacity","isFull","sync","strategy","_capacity","_numTokens","prototype","getNumTokens","getCapacity","setCapacity","isGivenBack","_semTake","semFlush","item","handleTimeout","onTimeOut","semTake","result","hasOptions","timeOut","onTake","Function","addCounter","bind","cancel","setPriority","timer","setTimeout","_shouldTakeToken","shouldTakeToken","_nextGroupItem","groupIterator","itemIterator","beginIterator","Math","min","next","topSync","taking","keepAlive","_keepAlive","weakerIterator","wearkeGroup","weakerItemIterator","weakerItem","unfair","endIterator","previous","timerID","_clearImmediate","_checkKeepAlive","_destroyWaiting","destroy","safe","onDestroy","_destroying","__onDestroy","_destroy","i","_len","j","_jlen","schedule","collection","iteratee","callback","arguments","count","index","len","items","doneCalled","canceled","errors","hasError","coll","key","called","err","Error","code","icancel","abort","iterate","proxy","defineProperty","configurable","enumerable","get","set","loop","size","_insertGroup","insert","_hasInWaitingTask","clearTimeout","isAlive","Boolean","hasInWaitingTask","_countInWaitingTokens","iterator","itemerator","_this","allowNode","global","setImmediate","fn","clearImmediate","assign","semCreate","args","g","eval","e","window","contains","toArray","thisArg","forEachImpl","ret","self","push","findIterator","AbstractBinaryTreeStrategy","rotateLeft","tmp","rotateRight","colorFlip","moveRedLeft","moveRedRight","insertInNode","compare","findMinNode","fixUp","removeMinNode","removeFromNode","BinaryTreeIterator","binaryTreeTraverse","some","pos","allowSetValue","sortedSet","find","descendAllTheWay","leftOrRight","moveCursor","rightOrLeft","tree","hasNext","nextNode"],"mappings":"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","file":"sem-lib.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"semLib\"] = factory();\n\telse\n\t\troot[\"semLib\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0eacb73d39704291af90","const BinaryTreeNode = require(\"./BinaryTreeNode\");\n\n// Here are some differences:\n// * This isn't a map structure: it's just a tree. There are no keys: the\n//   comparator applies to the values.\n// * We use the passed comparator.\nmodule.exports = class RedBlackTreeNode extends BinaryTreeNode {\n    constructor(value, parent = null) {\n        super(value, parent);\n        this.isRed = true; // null nodes -- leaves -- are black\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/RedBlackTreeNode.js","const AbstractSortedSet = require(\"./SortedSet/AbstractSortedSet\");\nconst RedBlackTreeNode = require(\"./SortedSet/RedBlackTreeNode\");\nconst RedBlackTreeStrategy = require(\"./SortedSet/RedBlackTreeStrategy\");\n\nconst isNumeric = obj => {\n    if (obj === undefined || obj === null || Array.isArray(obj)) {\n        return false;\n    }\n\n    const parsed = parseFloat(obj);\n    if (obj === parsed) {\n        return true;\n    }\n\n    return obj - parsed + 1 >= 0;\n};\n\nconst isObject = obj => {\n    return typeof obj === \"object\" && obj !== null;\n};\n\n/**\n * Value of parsed interger or default value if not a number or < 0\n * @param  {Any} num value to parse\n * @param  {Interger} _default default value\n * @return {Interger} parsing result\n */\nconst toInteger = (num, positive, _default) => {\n    if (!isNumeric(num)) {\n        return _default;\n    }\n\n    if (num === Number.POSITIVE_INFINITY) {\n        return num;\n    }\n\n    if (num === Number.NEGATIVE_INFINITY) {\n        return positive ? _default : num;\n    }\n\n    num = parseInt(num, 10);\n\n    return positive && num < 0 ? _default : num;\n};\n\nconst idComparator = (a, b) => {\n    return a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n};\n\nconst priorityComparator = (a, b) => {\n    return a.priority > b.priority ? 1 : a.priority < b.priority ? -1 : 0;\n};\n\nconst hasProp = Object.hasOwnProperty;\n\n// Debugging purpose\nlet globalCounter = 0;\n\nclass SortedSet extends AbstractSortedSet {\n    get(value) {\n        const {comparator} = this.priv;\n        let {root: node} = this.priv;\n        let cmp;\n\n        while (node !== null) {\n            cmp = comparator(value, node.value);\n            if (cmp === 0) {\n                break;\n            } else if (cmp < 0) {\n                node = node.left;\n            } else {\n                node = node.right;\n            }\n        }\n\n        return node === null ? undefined : node.value;\n    }\n}\n\nclass Inwaiting extends RedBlackTreeNode {\n    constructor(semID, task, priority, num, options) {\n        super();\n        this.value = this;\n        this.id = ++globalCounter;\n        this.taken = 0;\n        this.task = task;\n        this.priority = priority;\n        this.num = num;\n        this.semaphore = semID;\n\n        if (options) {\n            [\n                \"onTimeOut\",\n                \"onCancel\",\n                \"unfair\",\n                \"shouldTakeToken\",\n                \"sync\"\n            ].forEach(prop => {\n                if (hasProp.call(options, prop)) {\n                    this[prop] = options[prop];\n                }\n            });\n        }\n    }\n\n    addCounter(nextNum) {\n        this.num += toInteger(nextNum, true, 1);\n    }\n\n    cancel() {\n        const {onCancel, taken, semaphore: semID} = this;\n        semID._removeItem(this);\n\n        if (taken !== 0) {\n            // give on next tick to wait for all synchronous canceled to be done\n            semID._setImmediate(() => {\n                semID.semGive(taken, true);\n            });\n        }\n\n        if (typeof onCancel === \"function\") {\n            onCancel();\n        }\n    }\n\n    setPriority(nextPriority) {\n        if (this.group == null) {\n            return;\n        }\n\n        const {semaphore: semID} = this;\n\n        nextPriority = toInteger(nextPriority, false, semID.priority);\n        if (nextPriority === this.priority) {\n            return;\n        }\n\n        this.group.stack.remove(this);\n        if (this.group.stack.length === 0) {\n            // No more inWaiting for this priority group\n            semID._queue.remove(this.group);\n        }\n\n        this.priority = nextPriority;\n        semID._insertItem(this);\n    }\n\n    destroy() {\n        // Remove properties to allow garbage collection\n        Object.keys(this).forEach(prop => {\n            if (prop !== \"id\") {\n                delete this[prop];\n            }\n        });\n\n        // Prevent usage of these methods on a destroyed object\n        [\"addCounter\", \"cancel\", \"setPriority\", \"destroy\"].forEach(prop => {\n            this[prop] = undefined;\n        });\n\n        this.destroyed = true;\n    }\n}\n\n/**\n * @param  {Integer} capacity (default = 1) Number of tokens that can be handled by the Semaphore\n * @param  {Boolean} isFull   (default = false) if true object is created with tokens\n * @param  {Integer} priority (default = 15) default priority\n * @param  {Boolean} sync     if true tasks will be run synchronously\n */\nfunction Semaphore(capacity, isFull, priority, sync = false) {\n    const _queue = new SortedSet({\n        comparator: priorityComparator,\n        strategy: RedBlackTreeStrategy\n    });\n\n    this.id = ++globalCounter;\n    this._capacity = toInteger(capacity, true, 1);\n    this._queue = _queue;\n    this._numTokens = isFull ? this._capacity : 0;\n    // eslint-disable-next-line no-magic-numbers\n    this.priority = toInteger(priority, false, 15);\n    this.sync = sync;\n}\n\n/**\n * Return number of available tokens\n * @return {Interger} number of available tokens\n */\nSemaphore.prototype.getNumTokens = function getNumTokens() {\n    return this._numTokens;\n};\n\n/**\n * Return maximum of available tokens\n * @return {Integer} maximum of available tokens\n */\nSemaphore.prototype.getCapacity = function getCapacity() {\n    return this._capacity;\n};\n\n/**\n * Set the maximum of available tokens\n * @return {Integer} maximum of available tokens\n */\nSemaphore.prototype.setCapacity = function setCapacity(capacity) {\n    this._capacity = toInteger(capacity, true, this._capacity);\n};\n\n/**\n * Add tokens to the Semaphore\n *\n * @param {Interger} num Number of tokens to add\n */\nSemaphore.prototype.semGive = function semGive(num, isGivenBack) {\n    if (this.destroyed) {\n        return false;\n    }\n\n    if (num !== Number.POSITIVE_INFINITY) {\n        num = toInteger(num, true, 1);\n        if (num < 1) {\n            num = 1;\n        }\n        this._numTokens += num;\n    } else {\n        this._numTokens = num;\n    }\n\n    if (!isGivenBack && this._numTokens > this._capacity) {\n        this._numTokens = this._capacity;\n    }\n\n    this._semTake(isGivenBack);\n\n    if (isGivenBack && this._numTokens > this._capacity) {\n        this._numTokens = this._capacity;\n    }\n\n    return true;\n};\n\n/**\n * Give tokens to every inwaiting tasks\n */\nSemaphore.prototype.semFlush = function semFlush() {\n    if (this.destroyed) {\n        return false;\n    }\n\n    this._numTokens = 0;\n    this._queue.forEach(group => {\n        group.stack.forEach(item => {\n            item.num = 0;\n        });\n    });\n    this._semTake();\n    return true;\n};\n\nSemaphore.prototype.handleTimeout = function handleTimeout(item) {\n    const {onTimeOut, taken} = item;\n    this._removeItem(item);\n\n    if (taken !== 0) {\n        // give on next tick to wait for all synchronous canceled to be done\n        this._setImmediate(() => {\n            this.semGive(taken, true);\n        });\n    }\n\n    if (typeof onTimeOut === \"function\") {\n        onTimeOut();\n    }\n};\n\n/**\n * Wait for Semaphore availability before calling onTake callback\n * @example\n * semTake(Function[, takeInstance]);\n * semTake(Settings[, takeInstance]);\n *\n * @param {Object} options options with the following properties:\n * <ul>\n * <li>{Function} <b><em>onTake</em></b></li>: called on successful take\n * <li>{Integer} <b><em>num</em></b></li>(optional, default = 1): Number of tokens to take before calling onTake callback\n * <li>{Integer} <b><em>priority</em></b></li>(optional): task priority, smaller is higher priority\n * <li>{Number} <b><em>timeOut</em></b></li>(optional): milliseconds to wait before timeOut. If !(options['timeOut'] > 0), waiting will last forever\n * <li>{Function} <b><em>onTimeOut</em></b></li>(optional): called if timeOut occurs\n * </ul>\n * @return {Object|false} item item.addCounter(n = 1) => wait for n more tokens\n */\nSemaphore.prototype.semTake = function semTake(options, result) {\n    if (this.destroyed) {\n        return false;\n    }\n\n    const hasOptions = isObject(options);\n    let task, timeOut, num, priority;\n\n    if (hasOptions) {\n        task = options.onTake;\n        priority = options.priority;\n        num = options.num;\n        timeOut = options.timeOut;\n    } else if (typeof options === \"function\") {\n        task = options;\n        options = null;\n    }\n\n    if (typeof task !== \"function\") {\n        task = Function.prototype;\n    }\n\n    num = toInteger(num, true, 1);\n    priority = toInteger(priority, false, this.priority);\n\n    const item = new Inwaiting(this, task, priority, num, hasOptions ? options : false);\n\n    if (typeof result === \"function\") {\n        result(item);\n    } else if (isObject(result)) {\n        result.addCounter = item.addCounter.bind(item);\n        result.cancel = item.cancel.bind(item);\n        result.setPriority = item.setPriority.bind(item);\n    }\n\n    this._insertItem(item);\n\n    if (isNumeric(timeOut) && timeOut > 0) {\n        item.timer = setTimeout(this.handleTimeout.bind(this, item), timeOut);\n    }\n\n    this._semTake();\n    return item;\n};\n\nSemaphore.prototype._shouldTakeToken = function _shouldTakeToken(item, num) {\n    // avoid giving item as context when calling shouldTakeToken\n    return typeof item.shouldTakeToken !== \"function\" || (0, item.shouldTakeToken)(num, item.num, item.taken, this);\n};\n\nSemaphore.prototype._nextGroupItem = function _nextGroupItem() {\n    let groupIterator, group, itemIterator, item;\n\n    groupIterator = this._queue.beginIterator();\n    group = groupIterator.value();\n\n    itemIterator = group.stack.beginIterator();\n    item = itemIterator.value();\n\n    while (item && item.num !== 0 && !this._shouldTakeToken(item, Math.min(item.num, this._numTokens))) {\n        item = null;\n\n        itemIterator = itemIterator.next();\n        if (itemIterator === null) {\n            groupIterator = groupIterator.next();\n            if (groupIterator === null) {\n                break;\n            }\n\n            group = groupIterator.value();\n            if (group === null) {\n                break;\n            }\n\n            itemIterator = group.stack.beginIterator();\n        }\n\n        item = itemIterator.value();\n    }\n\n    return [group, item];\n};\n\n/**\n * Take tokens if available\n *\n */\nSemaphore.prototype._semTake = function _semTake(topSync) {\n    if (this.taking) {\n        return;\n    }\n\n    if (typeof this.keepAlive === \"undefined\") {\n        this._keepAlive();\n    }\n\n    this.taking = true;\n    while (this._checkKeepAlive(this._destroyWaiting)) {\n        const [group, item] = this._nextGroupItem();\n        if (item == null) {\n            break;\n        }\n\n        let weakerIterator, wearkeGroup, weakerItemIterator, weakerItem;\n\n        // if item is still waiting for tokens\n        if (item.num > this._numTokens) {\n            item.taken += this._numTokens;\n            item.num -= this._numTokens;\n            this._numTokens = 0;\n\n            // take token from tasks with weaker priority\n            if (item.unfair && this._queue.length !== 1) {\n                weakerIterator = this._queue.endIterator().previous();\n\n                while (weakerIterator && item.num !== 0) {\n                    wearkeGroup = weakerIterator.value();\n                    if (wearkeGroup === group || wearkeGroup.priority <= this.priority) {\n                        // can only be unfair on tasks with lower priority that semaphore default priority\n                        break;\n                    }\n\n                    weakerItemIterator = wearkeGroup.stack.endIterator().previous();\n                    weakerItem = weakerItemIterator ? weakerItemIterator.value() : null;\n\n                    while (weakerItem && item.num !== 0) {\n                        if (weakerItem.taken > 0 && this._shouldTakeToken(item, Math.min(item.num, weakerItem.taken))) {\n                            if (item.num > weakerItem.taken) {\n                                weakerItem.num += weakerItem.taken;\n                                item.num -= weakerItem.taken;\n                                weakerItem.taken = 0;\n                            } else {\n                                weakerItem.taken -= item.num;\n                                weakerItem.num += item.num;\n                                item.num = 0;\n                            }\n                        }\n\n                        weakerItemIterator = weakerItemIterator.previous();\n                        weakerItem = weakerItemIterator ? weakerItemIterator.value() : null;\n                    }\n\n                    weakerIterator = weakerIterator ? weakerIterator.previous() : null;\n                }\n            }\n\n            // if item is still waiting for tokens, try again at next give or flush\n            if (item.num !== 0) {\n                break;\n            }\n        }\n\n        item.taken += item.num;\n        if (this._numTokens !== Number.POSITIVE_INFINITY) {\n            this._numTokens -= item.num;\n        }\n        item.num = 0;\n\n        const sync = typeof topSync !== \"undefined\" ? topSync : typeof item.sync !== \"undefined\" ? item.sync : this.sync;\n        const {taken, task, onCancel} = item;\n        this._removeItem(item);\n\n        if (sync) {\n            task();\n        } else {\n            // Non blocking call of callback\n            // A way to loop through in waiting tasks without blocking\n            // the semaphore process until done\n            let timerID = this._setImmediate(() => {\n                timerID = null;\n                task();\n            });\n            item.cancel = () => {\n                this._clearImmediate(timerID);\n                timerID = null;\n\n                // give on next tick to wait for all synchronous canceled to be done\n                this._setImmediate(() => {\n                    this.semGive(taken, true);\n                });\n\n                if (typeof onCancel === \"function\") {\n                    onCancel();\n                }\n            };\n        }\n    }\n    this.taking = false;\n};\n\n/**\n * Destroy all inwaiting tasks\n * @param  {Boolean} safe if true, wait for all inwaiting tasks to be performed, else, destroy with no warn\n */\nSemaphore.prototype.destroy = function(safe, onDestroy) {\n    if (this._destroying) {\n        return false;\n    }\n\n    this._destroying = true;\n    this.__onDestroy = onDestroy;\n\n    if (safe !== false) {\n        this._destroyWaiting = true;\n        this._semTake();\n        return true;\n    }\n\n    return this._destroy(safe);\n};\n\nSemaphore.prototype._destroy = function(safe) {\n    this._destroyWaiting = false;\n\n    let i, _len, j, _jlen;\n\n    // for loop to avoid infinite loop with while\n    for (i = 0, _len = this._queue.length; i < _len; i++) {\n        const group = this._queue.beginIterator().value();\n\n        for (j = 0, _jlen = group.stack.length; j < _jlen; j++) {\n            const item = group.stack.beginIterator().value();\n            if (safe !== false) {\n                item.cancel();\n            }\n            this._removeItem(item);\n        }\n    }\n\n    if (this._checkKeepAlive()) {\n        return false;\n    }\n\n    const __onDestroy = this.__onDestroy;\n\n    this.destroyed = true;\n    if (\"function\" === typeof __onDestroy) {\n        __onDestroy();\n    }\n    return true;\n};\n\nSemaphore.prototype.schedule = function(collection, priority, iteratee, callback) {\n    const semID = this;\n\n    switch (arguments.length) {\n        case 2:\n            if (typeof priority === \"function\") {\n                callback = priority;\n                priority = null;\n            }\n            break;\n        case 3:\n            callback = iteratee;\n            iteratee = null;\n\n            if (\"function\" === typeof priority) {\n                iteratee = priority;\n                priority = null;\n            }\n            break;\n        default:\n            // Nothing to do\n    }\n\n    if (callback == null) {\n        callback = Function.prototype;\n    }\n\n    let count = 0;\n    let index = -1;\n    const isArray = Array.isArray(collection);\n    const keys = isArray ? null : Object.keys(collection);\n    const len = isArray ? collection.length : keys.length;\n\n    if (len === 0) {\n        callback();\n        return null;\n    }\n\n    const items = new Array(len);\n    let doneCalled = false;\n    let canceled = false;\n    let taken = 0;\n    const errors = new Array(len);\n    let hasError = false;\n\n    const onTake = (coll, i) => {\n        taken++;\n        items[i] = null;\n        const key = isArray ? i : keys[i];\n\n        let called = false;\n        const next = err => {\n            if (called) {\n                throw new Error(\"callback already called\");\n            }\n            called = true;\n            items[i] = null;\n\n            semID.semGive();\n            taken--;\n\n            if (doneCalled) {\n                return;\n            }\n\n            if (canceled && !err) {\n                err = new Error(\"canceled\");\n                err.code = \"CANCELED\";\n            }\n\n            if (err) {\n                if (!hasError) {\n                    hasError = true;\n                    if (!canceled) {\n                        cancel();\n                    }\n                }\n                errors[i] = err;\n            }\n\n            if (++count === len || hasError && taken === 0) {\n                doneCalled = true;\n                if (canceled) {\n                    errors.code = \"CANCELED\";\n                }\n                callback(hasError ? errors : null);\n            }\n        };\n\n        if (canceled) {\n            next();\n            return;\n        }\n\n        const icancel = typeof iteratee === \"function\" ? iteratee(coll[key], key, next) : coll[key](next);\n\n        items[i] = {\n            cancel: () => {\n                if (typeof icancel === \"function\") {\n                    icancel();\n                } else if (icancel !== null && typeof icancel === \"object\") {\n                    if (typeof icancel.cancel === \"function\") {\n                        icancel.cancel();\n                    } else if (typeof icancel.abort === \"function\") {\n                        icancel.abort();\n                    }\n                }\n            }\n        };\n    };\n\n    const iterate = i => {\n        const item = semID.semTake({\n            priority,\n            onTake: onTake.bind(null, collection, i)\n        });\n\n        const proxy = {\n            cancel: item.cancel ? () => {\n                item.cancel();\n                onTake(collection, i);\n            } : undefined\n        };\n\n        for (const key in item) {\n            if (key === \"cancel\") {\n                continue;\n            }\n\n            Object.defineProperty(proxy, key, {\n                configurable: true,\n                enumerable: true,\n                get() {\n                    return item[key];\n                },\n                set(value) {\n                    item[key] = value;\n                    return value;\n                }\n            });\n        }\n\n        return proxy;\n    };\n\n    const loop = () => {\n        do {\n            ++index;\n            items[index] = iterate(index);\n        } while (index !== len - 1);\n    };\n\n    function cancel() {\n        if (canceled) {\n            return;\n        }\n\n        canceled = true;\n        for (let i = 0, size = items.length; i < size; i++) {\n            if (items[i] !== null && typeof items[i] === \"object\" && typeof items[i].cancel === \"function\") {\n                items[i].cancel();\n                items[i] = null;\n            }\n        }\n    }\n\n    const setPriority = nextPriority => {\n        for (let i = 0, size = items.length; i < size; i++) {\n            if (items[i] !== null && typeof items[i] === \"object\" && typeof items[i].setPriority === \"function\") {\n                items[i].setPriority(nextPriority);\n            }\n        }\n    };\n\n    loop();\n\n    return {\n        setPriority,\n        cancel\n    };\n};\n\nSemaphore.prototype._insertItem = function(item) {\n    let group = this._queue.get({\n        priority: item.priority\n    });\n    if (!group) {\n        group = this._insertGroup(item);\n    }\n    group.stack.insert(item);\n    item.group = group;\n};\n\nSemaphore.prototype._checkKeepAlive = function _checkKeepAlive(_destroyWaiting) {\n    if (this._hasInWaitingTask()) {\n        return true;\n    }\n\n    if (this.keepAlive) {\n        clearTimeout(this.keepAlive);\n        delete this.keepAlive;\n    }\n\n    if (_destroyWaiting) {\n        this._destroy();\n    }\n    return false;\n};\n\nSemaphore.prototype.isAlive = function isAlive() {\n    return Boolean(this.keepAlive);\n};\n\nSemaphore.prototype.hasInWaitingTask = function hasInWaitingTask() {\n    return hasProp.call(this, \"_queue\") && this._hasInWaitingTask();\n};\n\nSemaphore.prototype._countInWaitingTokens = function _countInWaitingTokens() {\n    let count = 0;\n\n    if (!this.hasInWaitingTask()) {\n        return count;\n    }\n\n    let iterator = this._queue.beginIterator();\n\n    let group, itemerator, item;\n    while (iterator) {\n        group = iterator.value();\n\n        if (group != null && group.stack.length !== 0) {\n            itemerator = group.stack.beginIterator();\n\n            while (itemerator) {\n                item = itemerator.value();\n                if (item != null) {\n                    count += item.num;\n                }\n                itemerator = itemerator.next();\n            }\n        }\n\n        iterator = iterator.next();\n    }\n\n    return count;\n};\n\nSemaphore.prototype._hasInWaitingTask = function _hasInWaitingTask() {\n    return this._queue.length !== 0;\n};\n\nSemaphore.prototype._keepAlive = function _keepAlive() {\n    if (!this._hasInWaitingTask()) {\n        return;\n    }\n    const _this = this;\n    this.keepAlive = setTimeout(() => {\n        _this._keepAlive();\n    }, 1000);\n};\n\n/**\n * Remove item from a priority group\n *\n */\nSemaphore.prototype._removeItem = function _removeItem(item) {\n    if (item.timer) {\n        clearTimeout(item.timer);\n    }\n\n    item.group.stack.remove(item);\n\n    if (item.group.stack.length === 0) {\n        // No more inWaiting for this priority group\n        this._queue.remove(item.group);\n\n        this._checkKeepAlive();\n    }\n\n    item.destroy();\n};\n\nSemaphore.prototype._insertGroup = function _insertGroup(item) {\n    const stack = new SortedSet({\n        comparator: idComparator,\n        strategy: RedBlackTreeStrategy,\n        allowNode: true\n    });\n\n    const group = {\n        priority: item.priority,\n        stack\n    };\n    this._queue.insert(group);\n    return group;\n};\n\nSemaphore.prototype._setImmediate = (() => {\n    if (typeof global === \"object\" && typeof global.setImmediate === \"function\") {\n        return global.setImmediate;\n    }\n\n    return fn => {\n        return setTimeout(fn, 1);\n    };\n})();\n\nSemaphore.prototype._clearImmediate = (() => {\n    if (typeof global === \"object\" && typeof global.clearImmediate === \"function\") {\n        return global.clearImmediate;\n    }\n\n    return id => {\n        clearTimeout(id);\n    };\n})();\n\nObject.assign(exports, {\n    semCreate: (...args) => {\n        return new Semaphore(...args);\n    },\n    Semaphore,\n    Inwaiting\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/sem-lib.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = class AbstractSortedSet {\n    constructor(options) {\n        if (options === null || typeof options !== \"object\" || typeof options.strategy !== \"function\") {\n            throw new Error(\"Must pass options.strategy, a strategy\");\n        }\n        if (options === null || typeof options !== \"object\" || typeof options.comparator !== \"function\") {\n            throw new Error(\"Must pass options.comparator, a comparator\");\n        }\n        this.priv = new options.strategy(options);\n        this.length = 0;\n    }\n\n    insert(value) {\n        this.priv.insert(value);\n        this.length += 1;\n        return this;\n    }\n\n    remove(value) {\n        this.priv.remove(value);\n        this.length -= 1;\n        return this;\n    }\n\n    contains(value) {\n        return this.priv.contains(value);\n    }\n\n    // Returns this set as an Array\n    toArray() {\n        return this.priv.toArray();\n    }\n\n    forEach(callback, thisArg) {\n        this.priv.forEachImpl(callback, this, thisArg);\n    }\n\n    map(callback, thisArg) {\n        const ret = [];\n        this.priv.forEachImpl((value, index, self) => {\n            ret.push(callback.call(thisArg, value, index, self));\n        }, this, thisArg);\n        return ret;\n    }\n\n    filter(callback, thisArg) {\n        const ret = [];\n        this.priv.forEachImpl((value, index, self) => {\n            if (callback.call(thisArg, value, index, self)) {\n                ret.push(value);\n            }\n        }, this, thisArg);\n        return ret;\n    }\n\n    every(callback, thisArg) {\n        let ret = true;\n        this.priv.forEachImpl((value, index, self) => {\n            if (!callback.call(thisArg, value, index, self)) {\n                ret = false;\n            }\n            return !ret;\n        }, this, thisArg, true);\n        return ret;\n    }\n\n    some(callback, thisArg) {\n        let ret = false;\n        this.priv.forEachImpl((value, index, self) => {\n            if (callback.call(thisArg, value, index, self)) {\n                ret = true;\n            }\n            return ret;\n        }, this, thisArg);\n        return ret;\n    }\n\n    // An iterator is similar to a C++ iterator: it points _before_ a value.\n\n    // So in this sorted set:\n\n    //   | 1 | 2 | 3 | 4 | 5 |\n    //   ^a      ^b          ^c\n\n    // `a` is a pointer to the beginning of the iterator. `a.value()` returns\n    // `3`. `a.previous()` returns `null`. `a.setValue()` works, if\n    // `options.allowSetValue` is true.\n\n    // `b` is a pointer to the value `3`. `a.previous()` and `a.next()` both do\n    // the obvious.\n\n    // `c` is a pointer to the `null` value. `c.previous()` works; `c.next()`\n    // returns null. `c.setValue()` throws an exception, even if\n    // `options.allowSetValue` is true.\n\n    // Iterators have `hasNext()` and `hasPrevious()` methods, too.\n\n    // Iterators are immutible. `iterator.next()` returns a new iterator.\n\n    // Iterators become invalid as soon as `insert()` or `remove()` is called.\n    findIterator(value) {\n        return this.priv.findIterator(value);\n    }\n\n    // Finds an iterator pointing to the lowest possible value.\n    beginIterator() {\n        return this.priv.beginIterator();\n    }\n\n    // Finds an iterator pointing to the `null` value.\n    endIterator() {\n        return this.priv.endIterator();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/AbstractSortedSet.js","module.exports = class BinaryTreeNode {\n    constructor(value, parent = null) {\n        this.value = value;\n        this.left = null;\n        this.right = null;\n        this.parent = parent;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/BinaryTreeNode.js","const AbstractBinaryTreeStrategy = require(\"./AbstractBinaryTreeStrategy\");\nconst RedBlackTreeNode = require(\"./RedBlackTreeNode\");\n\n// An implementation of Left-Leaning Red-Black trees.\n\n// It's copied from http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf.\n// It's practically a copy-paste job, minus the semicolons. missing bits were\n// filled in with hints from\n// https://www.teachsolaisgames.com/articles/balanced_left_leaning.html\n\nconst rotateLeft = node => {\n    const tmp = node.right;\n    tmp.parent = null;\n\n    node.right = tmp.left;\n    if (node.right !== null) {\n        node.right.parent = node;\n    }\n\n    tmp.left = node;\n    if (tmp.left !== null) {\n        tmp.left.parent = tmp;\n    }\n    tmp.isRed = node.isRed;\n    node.isRed = true;\n    return tmp;\n};\n\nconst rotateRight = node => {\n    const tmp = node.left;\n    tmp.parent = null;\n\n    node.left = tmp.right;\n    if (node.left !== null) {\n        node.left.parent = node;\n    }\n\n    tmp.right = node;\n    if (tmp.right !== null) {\n        tmp.right.parent = tmp;\n    }\n\n    tmp.isRed = node.isRed;\n    node.isRed = true;\n    return tmp;\n};\n\nconst colorFlip = node => {\n    node.isRed = !node.isRed;\n    node.left.isRed = !node.left.isRed;\n    node.right.isRed = !node.right.isRed;\n};\n\nconst moveRedLeft = node => {\n    //throw 'Preconditions failed' if !(!node.left.isRed && !node.left.left?.isRed)\n    colorFlip(node);\n    if (node.right !== null && node.right.left !== null && node.right.left.isRed) {\n        node.right = rotateRight(node.right);\n        node.right.parent = node;\n        node = rotateLeft(node);\n        colorFlip(node);\n    }\n    return node;\n};\n\nconst moveRedRight = node => {\n    //throw 'Preconditions failed' if !(!node.right.isRed && !node.right.left?.isRed)\n    colorFlip(node);\n    if (node.left !== null && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n        colorFlip(node);\n    }\n    return node;\n};\n\nconst insertInNode = (node, value, compare, allowNode, parent) => {\n    if (node === null) {\n        if (allowNode && value instanceof RedBlackTreeNode) {\n            if (!value.isRed) {\n                value.isRed = true;\n            }\n            return value;\n        }\n        return new RedBlackTreeNode(value);\n    }\n\n    //if node.left isnt null && node.left.isRed && node.right isnt null && node.right.isRed\n    //  colorFlip(node)\n    if (node.value === value) {\n        throw new Error(\"Value already in set\");\n    }\n\n    if (compare(value, node.value) < 0) {\n        node.left = insertInNode(node.left, value, compare, allowNode, node);\n        node.left.parent = node;\n    } else {\n        node.right = insertInNode(node.right, value, compare, allowNode, node);\n        node.right.parent = node;\n    }\n\n    if (node.right !== null && node.right.isRed && !(node.left !== null && node.left.isRed)) {\n        node = rotateLeft(node);\n    }\n\n    if (node.left !== null && node.left.isRed && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n    }\n\n    // Put this here -- I couldn't get the whole thing to work otherwise :(\n    if (node.left !== null && node.left.isRed && node.right !== null && node.right.isRed) {\n        colorFlip(node);\n    }\n\n    return node;\n};\n\nconst findMinNode = node => {\n    while (node.left !== null) {\n        node = node.left;\n    }\n    return node;\n};\n\nconst fixUp = node => {\n    // Fix right-leaning red nodes\n    if (node.right !== null && node.right.isRed) {\n        node = rotateLeft(node);\n    }\n\n    // Handle a 4-node that traverses down the left\n    if (node.left !== null && node.left.isRed && node.left.left !== null && node.left.left.isRed) {\n        node = rotateRight(node);\n    }\n\n    // split 4-nodes\n    if (node.left !== null && node.left.isRed && node.right !== null && node.right.isRed) {\n        colorFlip(node);\n    }\n\n    return node;\n};\n\nconst removeMinNode = node => {\n    if (node.left === null) {\n        return null;\n    }\n    if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n        node = moveRedLeft(node);\n    }\n    node.left = removeMinNode(node.left);\n    if (node.left !== null) {\n        node.left.parent = node;\n    }\n    return fixUp(node);\n};\n\n// // const removeMinNodeStack = new Array(1024);\n// const removeMinNode = node => {\n//     let pos = 0;\n//     const removeMinNodeStack = [];\n//     removeMinNodeStack[pos++] = node;\n//     removeMinNodeStack[pos++] = 0;\n//     // let stackSize = pos;\n//     let ret;\n\n//     while (pos !== 0) {\n//         // if (pos > stackSize) {\n//         //     stackSize = pos;\n//         // }\n//         if (removeMinNodeStack[--pos] === 0) {\n//             node = removeMinNodeStack[--pos];\n\n//             if (node.left === null) {\n//                 ret = null;\n//                 continue;\n//             }\n\n//             if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n//                 node = moveRedLeft(node);\n//             }\n\n//             removeMinNodeStack[pos++] = node;\n//             removeMinNodeStack[pos++] = 1;\n//             removeMinNodeStack[pos++] = node.left;\n//             removeMinNodeStack[pos++] = 0;\n//         } else {\n//             node = removeMinNodeStack[--pos];\n//             node.left = ret;\n//             if (node.left !== null) {\n//                 node.left.parent = node;\n//             }\n//             ret = fixUp(node);\n//         }\n//     }\n\n//     // for (let i = 0; i < stackSize; i++) {\n//     //     removeMinNodeStack[i] = undefined;\n//     // }\n\n//     return ret;\n// };\n\nconst removeFromNode = (node, value, compare, allowNode) => {\n    if (node === null) {\n        throw new Error(\"Value not in set\");\n    }\n\n    if (node.value !== value && compare(value, node.value) < 0) {\n        if (node.left === null) {\n            throw new Error(\"Value not in set\");\n        }\n \n        if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n            node = moveRedLeft(node);\n        }\n \n        node.left = removeFromNode(node.left, value, compare, allowNode);\n        if (node.left !== null) {\n            node.left.parent = node;\n        }\n    } else {\n        if (node.left !== null && node.left.isRed) {\n            node = rotateRight(node);\n        }\n        if (node.right === null) {\n            if (value === node.value) {\n                return null; // leaf node; LLRB assures no left value here\n            }\n            throw new Error(\"Value not in set\");\n        }\n        if (!node.right.isRed && !(node.right.left !== null && node.right.left.isRed)) {\n            node = moveRedRight(node);\n        }\n        if (value === node.value) {\n            value = findMinNode(node.right).value;\n            const right = removeMinNode(node.right);\n\n            if (allowNode && value instanceof RedBlackTreeNode) {\n                value.left = node.left;\n                value.parent = node.parent;\n                value.isRed = node.isRed;\n                node = value;\n            }\n\n            node.value = value;\n            node.right = right;\n        } else {\n            node.right = removeFromNode(node.right, value, compare, allowNode);\n        }\n\n        if (node.right !== null) {\n            node.right.parent = node;\n        }\n    }\n\n    return fixUp(node);\n};\n\n// // const removeFromNodeStask = new Array(1024);\n// const removeFromNode = (node, value, compare, allowNode) => {\n//     let pos = 0;\n//     const removeFromNodeStask = [];\n//     removeFromNodeStask[pos++] = node;\n//     removeFromNodeStask[pos++] = 0;\n//     // let stackSize = pos;\n//     let ret, cmd;\n\n//     while (pos !== 0) {\n//         // if (pos > stackSize) {\n//         //     stackSize = pos;\n//         // }\n//         cmd = removeFromNodeStask[--pos];\n\n//         // eslint-disable-next-line default-case\n//         switch(cmd) {\n//             case 0:\n//                 node = removeFromNodeStask[--pos];\n\n//                 if (node === null) {\n//                     throw new Error(\"Value not in set\");\n//                 }\n\n//                 if (node.value !== value && compare(value, node.value) < 0) {\n//                     if (node.left === null) {\n//                         throw new Error(\"Value not in set\");\n//                     }\n//                     if (!node.left.isRed && !(node.left.left !== null && node.left.left.isRed)) {\n//                         node = moveRedLeft(node);\n//                     }\n//                     removeFromNodeStask[pos++] = node;\n//                     removeFromNodeStask[pos++] = 1;\n//                     removeFromNodeStask[pos++] = node.left;\n//                     removeFromNodeStask[pos++] = 0;\n//                     break;\n//                 }\n\n//                 if (node.left !== null && node.left.isRed) {\n//                     node = rotateRight(node);\n//                 }\n\n//                 if (node.right === null) {\n//                     if (value === node.value) {\n//                         ret = null; // leaf node; LLRB assures no left value here\n//                         break;\n//                     }\n//                     throw new Error(\"Value not in set\");\n//                 }\n\n//                 if (!node.right.isRed && !(node.right.left !== null && node.right.left.isRed)) {\n//                     node = moveRedRight(node);\n//                 }\n\n//                 if (value === node.value) {\n//                     value = findMinNode(node.right).value;\n//                     const right = removeMinNode(node.right);\n\n//                     if (allowNode && value instanceof RedBlackTreeNode) {\n//                         value.left = node.left;\n//                         value.parent = node.parent;\n//                         value.isRed = node.isRed;\n//                         node = value;\n//                     }\n\n//                     node.value = value;\n//                     node.right = right;\n\n//                     if (node.right !== null) {\n//                         node.right.parent = node;\n//                     }\n//                     ret = fixUp(node);\n//                     break;\n//                 }\n\n//                 removeFromNodeStask[pos++] = node;\n//                 removeFromNodeStask[pos++] = 2;\n//                 removeFromNodeStask[pos++] = node.right;\n//                 removeFromNodeStask[pos++] = 0;\n//                 break;\n//             case 1:\n//                 node = removeFromNodeStask[--pos];\n//                 node.left = ret;\n//                 if (node.left !== null) {\n//                     node.left.parent = node;\n//                 }\n//                 ret = fixUp(node);\n//                 break;\n//             case 2:\n//                 node = removeFromNodeStask[--pos];\n//                 node.right = ret;\n//                 if (node.right !== null) {\n//                     node.right.parent = node;\n//                 }\n//                 ret = fixUp(node);\n//                 break;\n//         }\n//     }\n\n//     // for (let i = 0; i < stackSize; i++) {\n//     //     removeFromNodeStask[i] = undefined;\n//     // }\n\n//     return ret;\n// };\n\nmodule.exports = class RedBlackTreeStrategy extends AbstractBinaryTreeStrategy {\n    insert(value) {\n        this.root = insertInNode(this.root, value, this.comparator, this.allowNode);\n        this.root.parent = null;\n        this.root.isRed = false;\n    }\n\n    remove(value) {\n        this.root = removeFromNode(this.root, value, this.comparator, this.allowNode);\n        if (this.root !== null) {\n            this.root.parent = null;\n            this.root.isRed = false;\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/RedBlackTreeStrategy.js","const BinaryTreeIterator = require(\"./BinaryTreeIterator\");\n\n// const binaryTreeTraverse = (node, callback, some) => {\n//     if (node === null) {\n//         return false;\n//     }\n\n//     let ret;\n\n//     ret = binaryTreeTraverse(node.left, callback, some);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     ret = callback(node.value);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     ret = binaryTreeTraverse(node.right, callback, some);\n//     if (some && ret) {\n//         return true;\n//     }\n\n//     return false;\n// };\n\n// Not subject to stackoverflow\nconst binaryTreeTraverse = (node, callback, some) => {\n    if (node === null) {\n        return;\n    }\n\n    const stack = [1, node.right, 0, node.value, 1, node.left];\n    let pos = stack.length;\n    let ret;\n\n    while (pos !== 0) {\n        pos -= 2;\n        node = stack[pos + 1];\n        if (stack[pos] === 0) {\n            ret = callback(node);\n            if (some && ret) {\n                break;\n            }\n        } else if (node !== null) {\n            stack[pos++] = 1;\n            stack[pos++] = node.right;\n            stack[pos++] = 0;\n            stack[pos++] = node.value;\n            stack[pos++] = -1;\n            stack[pos++] = node.left;\n        }\n    }\n};\n\n// An AbstractBinaryTreeStrategy has a @root. @root is null or an object with\n// `.left`, `.right` and `.value` properties.\nmodule.exports = class AbstractBinaryTreeStrategy {\n    constructor(options) {\n        this.root = null;\n        this.comparator = options.comparator;\n        this.allowSetValue = options.allowSetValue;\n        this.allowNode = options.allowNode;\n    }\n\n    toArray() {\n        const ret = [];\n        binaryTreeTraverse(this.root, value => {\n            ret.push(value);\n        });\n        return ret;\n    }\n\n    forEachImpl(callback, sortedSet, thisArg, some) {\n        if (typeof thisArg === \"undefined\") {\n            thisArg = sortedSet;\n        }\n        let i = 0;\n        binaryTreeTraverse(this.root, value => {\n            return callback.call(thisArg, value, i++, sortedSet);\n        }, some);\n    }\n\n    contains(value) {\n        const {comparator} = this;\n        let {root: node} = this;\n        let cmp;\n\n        while (node !== null) {\n            cmp = comparator(value, node.value);\n            if (cmp === 0) {\n                break;\n            } else if (cmp < 0) {\n                node = node.left;\n            } else {\n                node = node.right;\n            }\n        }\n\n        return node !== null && node.value === value;\n    }\n\n    findIterator(value) {\n        return BinaryTreeIterator.find(this, value, this.comparator);\n    }\n\n    beginIterator() {\n        return BinaryTreeIterator.left(this);\n    }\n\n    endIterator() {\n        return BinaryTreeIterator.right(this);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/AbstractBinaryTreeStrategy.js","const descendAllTheWay = (leftOrRight, node) => {\n    while (node[leftOrRight] !== null) {\n        node = node[leftOrRight];\n    }\n    return node;\n};\n\nconst moveCursor = (leftOrRight, node) => {\n    let parent, rightOrLeft;\n    if (node[leftOrRight] !== null) {\n        parent = node;\n        node = node[leftOrRight];\n        rightOrLeft = leftOrRight === \"left\" ? \"right\" : \"left\";\n        node = descendAllTheWay(rightOrLeft, node);\n    } else {\n        while ((parent = node.parent) !== null && parent[leftOrRight] === node) {\n            node = parent;\n        }\n        node = parent; // either null or the correct-direction parent\n    }\n    return node;\n};\n\n// The BinaryTreeIterator actually writes to the tree: it maintains a\n// \"parent\" variable on each node. Please ignore this.\nclass BinaryTreeIterator {\n    constructor(tree, node) {\n        this.tree = tree;\n        this.node = node;\n    }\n\n    next() {\n        return this.node === null ? null : new BinaryTreeIterator(this.tree, moveCursor(\"right\", this.node));\n    }\n\n    previous() {\n        if (this.node === null) {\n            if (this.tree.root === null) {\n                return null;\n            }\n\n            return new BinaryTreeIterator(this.tree, descendAllTheWay(\"right\", this.tree.root));\n        }\n\n        const node = moveCursor(\"left\", this.node);\n        return node === null ? null : new BinaryTreeIterator(this.tree, node);\n    }\n\n    hasNext() {\n        return this.node !== null;\n    }\n\n    hasPrevious() {\n        return this.previous() !== null;\n    }\n\n    value() {\n        return this.node === null ? null : this.node.value;\n    }\n\n    setValue(value) {\n        if (!this.tree.allowSetValue) {\n            throw new Error(\"Must set options.allowSetValue\");\n        }\n        if (!this.hasNext()) {\n            throw new Error(\"Cannot set value at end of set\");\n        }\n        this.node.value = value;\n        return value;\n    }\n}\n\nBinaryTreeIterator.find = (tree, value, comparator) => {\n    let {root: node} = tree;\n    let nextNode = null; // For finding an in-between node\n    let cmp;\n\n    while (node !== null) {\n        cmp = comparator(value, node.value);\n        if (cmp === 0) {\n            break;\n        }\n\n        if (cmp < 0) {\n            if (node.left === null) {\n                break;\n            }\n\n            // If we descend all right after this until there are\n            // no more right nodes, we want to return an\n            // \"in-between\" iterator ... pointing here.\n            nextNode = node;\n            node = node.left;\n        } else if (node.right !== null) {\n            node = node.right;\n        } else {\n            node = nextNode;\n            break;\n        }\n    }\n\n    return new BinaryTreeIterator(tree, node);\n};\n\nBinaryTreeIterator.left = tree => {\n    if (tree.root === null) {\n        return new BinaryTreeIterator(tree, null);\n    }\n\n    const node = descendAllTheWay(\"left\", tree.root);\n    return new BinaryTreeIterator(tree, node);\n};\n\nBinaryTreeIterator.right = tree => {\n    return new BinaryTreeIterator(tree, null);\n};\n\nmodule.exports = BinaryTreeIterator;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/SortedSet/BinaryTreeIterator.js"],"sourceRoot":""}